import "Arrays";

import "net";
import "math";



// print math.abs(-32);
// print math.abs(32);
// 
// let str = "This is my sting";
// 
// print str.length;
// print str[2] + str[1];
// 
// 
// let arr = ["this", 1, str, str.length];
// print "arr: " + arr;
// print arr.length;
// 
// arr[1] = "changed!";
// print arr;
// print arr.length;
// print arr.__proto__;

// let arr1 = [];
// print arr1;
// arr1 = arr1.push(-1);
// print arr1;
// print arr1.__proto__;

let server = net.NewServer();
let users = {};

func handleRoot(req, res) {
    res.json('{"message": "Hello"}');
}

func addUser(req,res) {
    let splits = req.path.split('/');
    let userId = splits[splits.length - 1];
    users[userId] = users;
    let str = '' + users;
    res.json('{"message": "'+  str +'"}');
}


print "Registering handlers to server: " + server;
let p = server.post;
let g = server.get;
// server.post("/user/:id", addUser);
print "Starting server on port 2000";
server.get("/", handleRoot);
server.listen(2000);
